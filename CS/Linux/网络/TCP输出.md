每个TCP套接字有一个发送缓冲区，我们可以使用 SO_SNDBUF 套接字选项来更改缓冲区大小。当某个应用进程调用 write 时，内核从该应用程序的缓存区复制所有数据到所写套接字的发送缓冲区。
如果该套接字的发送缓冲区容不下该进程的所有数据（或是应用进程的缓冲区大于套接字的发送缓冲区，或是套接字的发送缓冲区已经有其他数据），该应用进程将被投入睡眠。这里假设套接字是阻塞的，它是通常的默认设置。
内核将不从 write 系统调用返回，直到应用进程缓冲区中的所有数据都复制到套接字发送缓冲区。

因此，写一个TCP套接字的 write 调用成功返回仅仅表示我们可以重新使用原来的应用进程缓冲区，并不表明对端的TCP或应用进程已接收到数据。